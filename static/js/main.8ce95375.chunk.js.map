{"version":3,"sources":["hooks/useLocalStorage.js","context/FavContext.js","components/Nav/Nav.js","components/Header/Header.js","components/SearchBar/SearchBar.js","components/Home/Home.js","components/Sub/Sub.js","hooks/useStarWars.js","components/Spinner/Spinner.js","components/Main/Main.js","components/App/App.js","index.js"],"names":["useLocalStorage","key","initial","useState","defaultValue","window","saved","localStorage","getItem","JSON","parse","getStorageValue","val","setVal","useEffect","setItem","stringify","FavContext","createContext","FavProvider","props","shape","type","id","data","favFilm","setFavFilm","favPerson","setFavPerson","favPlanet","setFavPlanet","favStarship","setFavStarship","Provider","value","useFav","context","useContext","Error","Nav","className","to","isActive","Header","company","SearchBar","inputSearch","createRef","btnSearch","navigate","useNavigate","btnState","keyword","category","onSubmit","ev","preventDefault","current","ref","name","placeholder","disabled","Home","time","active","setSearchState","nms","Array","isArray","join","Date","toLocaleTimeString","children","Sub","defaultProps","now","useStarWars","list","setList","setKeyword","axios","defaults","baseURL","controller","AbortController","get","params","search","timeout","then","response","results","catch","err","isCancel","console","warn","log","message","abort","Spinner","Main","home","Films","lazy","People","Planets","Starships","films","setFilms","people","setPeople","planets","setPlanets","starships","setStarships","scrollTo","path","element","fallback","exact","App","useLocation","pathname","split","oldPage","setOldPage","setDisabled","replace","state","createRoot","document","getElementById","render","StrictMode"],"mappings":"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","file":"static/js/main.8ce95375.chunk.js","sourcesContent":["//custom hook for localStorage\nimport { useState, useEffect } from \"react\";\n\nfunction getStorageValue(key, defaultValue) {\n  // getting stored value if exists and client side\n  if (typeof window !== \"undefined\") {\n    const saved = localStorage.getItem(key);\n    const initial = JSON.parse(saved);\n    return initial || defaultValue;\n  }\n}\n\nexport default function useLocalStorage(key, initial) {\n  const [val, setVal] = useState(() => {\n    return getStorageValue(key, initial);\n  });\n\n  useEffect(() => {\n    localStorage.setItem(key, JSON.stringify(val));\n  }, [val, key]);\n\n  return [val, setVal];\n}\n","import { useContext, createContext } from \"react\";\nimport useLocalStorage from \"../hooks/useLocalStorage\";\n\nconst FavContext = createContext();\n\nfunction FavProvider(props) {\n  const shape = {\n    type: \"\",\n    id: 0,\n    data: {},\n  };\n  const [favFilm, setFavFilm] = useLocalStorage(\"FavFilm\", shape);\n  const [favPerson, setFavPerson] = useLocalStorage(\"FavPerson\", shape);\n  const [favPlanet, setFavPlanet] = useLocalStorage(\"FavPlanet\", shape);\n  const [favStarship, setFavStarship] = useLocalStorage(\"FavStarship\", shape);\n\n  function updateFav(type, id, data) {\n    switch (type) {\n      case \"films\":\n        setFavFilm({\n          type,\n          id,\n          data,\n        });\n        break;\n\n      case \"people\":\n        setFavPerson({\n          type,\n          id,\n          data,\n        });\n        break;\n\n      case \"planets\":\n        setFavPlanet({\n          type,\n          id,\n          data,\n        });\n        break;\n\n      case \"starships\":\n        setFavStarship({\n          type,\n          id,\n          data,\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  return (\n    <FavContext.Provider\n      value={[favFilm, favPerson, favPlanet, favStarship, updateFav]}\n      {...props}\n    />\n  );\n}\n\nfunction useFav() {\n  const context = useContext(FavContext);\n  if (!context) throw new Error(\"No context available!\");\n\n  return context;\n}\n\nexport { FavProvider, useFav };\n","// import Link from '../Link/Link';\nimport { NavLink } from \"react-router-dom\";\nimport \"./nav.css\";\n\nexport default function Nav(props) {\n  return (\n    <nav className=\"mainnav\">\n      <NavLink\n        to=\"/films\"\n        className={({ isActive }) => (isActive ? \"activeLink\" : \"\")}\n      >\n        Films\n      </NavLink>\n      <NavLink\n        to=\"/people\"\n        className={({ isActive }) => (isActive ? \"activeLink\" : \"\")}\n      >\n        People\n      </NavLink>\n      <NavLink\n        to=\"/planets\"\n        className={({ isActive }) => (isActive ? \"activeLink\" : \"\")}\n      >\n        Planets\n      </NavLink>\n      <NavLink\n        to=\"/starships\"\n        className={({ isActive }) => (isActive ? \"activeLink\" : \"\")}\n      >\n        Starships\n      </NavLink>\n    </nav>\n  );\n}\n","import \"./header.css\";\nimport Nav from \"../Nav/Nav\";\nimport { Link } from \"react-router-dom\";\n\nexport default function Header(props) {\n  return (\n    <header className=\"masthead\">\n      <h1>\n        <Link to=\"/react-2021\">{props.company}</Link>\n      </h1>\n      <Nav />\n    </header>\n  );\n}\n","import \"./searchbar.css\";\nimport { createRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\n\nexport default function SearchBar(props) {\n  let inputSearch = createRef();\n  let btnSearch = createRef();\n  let navigate = useNavigate();\n  const { btnState, keyword, category } = props;\n\n  function submitted(ev) {\n    ev.preventDefault();\n    navigate(`/${category}?search=${inputSearch.current.value}`);\n    inputSearch.current.value = \"\";\n  }\n\n  return (\n    <section className=\"searchBar\">\n      <form onSubmit={submitted}>\n        <input\n          ref={inputSearch}\n          type=\"text\"\n          name=\"keyword\"\n          className=\"searchText\"\n          placeholder=\"keyword\"\n          disabled={btnState}\n        />\n        <button\n          ref={btnSearch}\n          type=\"submit\"\n          className=\"searchBtn\"\n          name=\"searchBtn\"\n          disabled={btnState}\n        >\n          Search\n        </button>\n      </form>\n      {keyword && (\n        <p className=\"margin-0\">\n          You searched for <strong>{keyword}</strong>\n        </p>\n      )}\n    </section>\n  );\n}\n","import { PropTypes } from 'prop-types';\nimport { useEffect } from 'react';\n\nexport default function Home(props) {\n  const { name, time, active, setSearchState } = props;\n\n  let nms = Array.isArray(name) ? name.join(' and ') : name;\n\n  useEffect(() => {\n    setSearchState(true);\n  })\n\n  return (\n    <div>\n      <h2>Welcome {nms} to the Home page</h2>\n      <p>The time is {new Date(time).toLocaleTimeString()}</p>\n      <p>The component is {active ? 'active' : 'NOT active'}</p>\n      {props.children}\n    </div>\n  );\n}\nHome.defaultProps = {\n  time: Date.now(),\n};\nHome.propTypes = {\n  name: PropTypes.oneOfType([PropTypes.string, PropTypes.array]).isRequired,\n  time: PropTypes.number,\n  active: PropTypes.bool.isRequired,\n  children: PropTypes.arrayOf(PropTypes.element).isRequired,\n};\n","export default function Sub() {\n  return (\n    <section>\n      <p>Just a section to insert inside Home.</p>\n    </section>\n  );\n}\n","import { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n\nexport default function useStarWars(category) {\n  const [list, setList] = useState([]);\n  const [keyword, setKeyword] = useState(\"\");\n\n  axios.defaults.baseURL = \"https://swapi.dev/api\";\n\n  useEffect(() => {\n    const controller = new AbortController();\n    axios\n      .get(category, {\n        params: { search: keyword },\n        timeout: 4000,\n      })\n      .then((response) => {\n        setList(response.data.results);\n      })\n      .catch((err) => {\n        if (axios.isCancel(err)) {\n          console.warn(\"API Call canceled\");\n        } else {\n          console.log(err.message);\n        }\n      });\n\n    return () => {\n      // Abort axios fetch everytime a new fetch is demanded\n      controller.abort();\n    };\n  }, [category, setList, keyword]);\n\n  return [list, setKeyword];\n}\n","import \"./spinner.css\";\n\nexport default function Spinner(props) {\n  return (\n    <div className=\"overlay\">\n      <div className=\"spinner\">{props.children}</div>\n    </div>\n  );\n}\n","import \"./main.css\";\nimport Home from \"../Home/Home\";\nimport Sub from \"../Sub/Sub\";\nimport useStarWars from \"../../hooks/useStarWars\";\nimport { Route, Routes } from \"react-router-dom\";\nimport { useEffect, lazy, Suspense } from \"react\";\nimport Spinner from \"../Spinner/Spinner\";\n\nexport default function Main(props) {\n  const home = \"/react-2021\";\n  const Films = lazy(() => import(\"../Films/Films\"));\n  const People = lazy(() => import(\"../People/People\"));\n  const Planets = lazy(() => import(\"../Planets/Planets\"));\n  const Starships = lazy(() => import(\"../Starships/Starships\"));\n  const { keyword, setSearchState, category } = props;\n  const [films, setFilms] = useStarWars(\"films\");\n  const [people, setPeople] = useStarWars(\"people\");\n  const [planets, setPlanets] = useStarWars(\"planets\");\n  const [starships, setStarships] = useStarWars(\"starships\");\n\n  useEffect(() => {\n    if (category !== home) {\n      switch (category) {\n        case \"films\":\n          setFilms(keyword);\n          break;\n\n        case \"people\":\n          setPeople(keyword);\n          break;\n\n        case \"planets\":\n          setPlanets(keyword);\n          break;\n\n        case \"starships\":\n          setStarships(keyword);\n          break;\n\n        default:\n          break;\n      }\n    }\n    window.scrollTo(0, 0);\n  }, [category, keyword, setFilms, setPeople, setPlanets, setStarships]);\n\n  return (\n    <div className=\"mainContent\">\n      <Routes>\n        <Route\n          path=\"/films/*\"\n          element={\n            <Suspense fallback={<Spinner>Loading Data</Spinner>}>\n              <Films list={films} setSearchState={setSearchState} />\n            </Suspense>\n          }\n        />\n        <Route\n          path=\"/people/*\"\n          element={\n            <Suspense fallback={<Spinner>Loading Data</Spinner>}>\n              <People list={people} setSearchState={setSearchState} />\n            </Suspense>\n          }\n        />\n        <Route\n          path=\"/planets/*\"\n          element={\n            <Suspense fallback={<Spinner>Loading Data</Spinner>}>\n              <Planets list={planets} setSearchState={setSearchState} />\n            </Suspense>\n          }\n        />\n        <Route\n          path=\"/starships/*\"\n          element={\n            <Suspense fallback={<Spinner>Loading Data</Spinner>}>\n              <Starships list={starships} setSearchState={setSearchState} />\n            </Suspense>\n          }\n        />\n\n        <Route\n          exact\n          path={home}\n          element={\n            <Home\n              name={[\"C-3PO\", \"R2-D2\"]}\n              active={true}\n              time={new Date() - 50000000}\n              setSearchState={setSearchState}\n            >\n              <Sub />\n              <Sub />\n            </Home>\n          }\n        />\n      </Routes>\n    </div>\n  );\n}\n","import \"./App.css\";\nimport { useState, useEffect } from \"react\";\nimport { useLocation } from \"react-router-dom\";\nimport Header from \"../Header/Header\";\nimport SearchBar from \"../SearchBar/SearchBar\";\nimport Main from \"../Main/Main\";\nimport { FavProvider } from \"../../context/FavContext\";\n\nexport default function App(props) {\n  const name = \"Star Wars API\";\n  const [keyword, setKeyword] = useState(\"\");\n  const { pathname, search } = useLocation();\n  const [, category, id] = pathname.split(\"/\");\n  const [oldPage, setOldPage] = useState(category);\n  const [disabled, setDisabled] = useState(true);\n\n  useEffect(() => {\n    if (oldPage === category) {\n      if (search) {\n        const value = search.replace(\"?search=\", \"\");\n        setKeyword(value);\n      } else {\n        if (!id) {\n          setKeyword(\"\");\n        }\n      }\n    } else {\n      setKeyword(\"\");\n      setOldPage(category);\n    }\n  }, [category, search, id, oldPage]);\n\n  function setSearchState(state) {\n    setDisabled(state);\n  }\n\n  return (\n    <FavProvider>\n      <div className=\"App\">\n        <Header company={name} />\n        <SearchBar keyword={keyword} category={category} btnState={disabled} />\n\n        <main className=\"content\">\n          <Main\n            keyword={keyword}\n            setSearchState={setSearchState}\n            category={category}\n          />\n        </main>\n      </div>\n    </FavProvider>\n  );\n}\n","import React from \"react\";\nimport { createRoot } from \"react-dom/client\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport \"./index.css\";\nimport App from \"./components/App/App\";\n\nconst root = createRoot(document.getElementById(\"root\"));\nroot.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>\n);\n"],"sourceRoot":""}